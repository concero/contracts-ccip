Chainlink Functions assesses gas prices during the request and receive steps of the billing process.

During the request step, the total cost in LINK is estimated using the following formula:

```
total estimated gas cost in LINK = (Overestimated gas price * (Gas overhead + Callback gas limit)) / Native to LINK translation
total estimated cost in LINK = total estimated gas cost + premium fees
```

The overestimated gas price refers to a deliberately higher gas price estimation to account for potential price fluctuations between the time a request is made and the time Chainlink Functions fulfills it. By setting the gas price higher than the current one, Chainlink Functions increases the likelihood that the request will be fulfilled, even if gas prices rise unexpectedly in the short term.

During the receive step, the exact fulfillment cost is calculated using the following formula:

```
total gas cost in LINK = (Gas price * (Gas overhead + Callback gas)) / Native to LINK translation
total cost in LINK = total gas cost + premium fees
```

The gas price here is the current gas price which fluctuates depending on network conditions.

For more details, you can refer to the [Chainlink Functions Billing](https://docs.chain.link/chainlink-functions/resources/billing#request-costs) documentation.

---

`FunctionsBilling::_calculateCostEstimate()`

`FunctionsBilling::estimateCost()` is external and can be called directly via FunctionsCoordinator (which is FunctionsBilling)

---

`PriceRegistry::getDestinationChainGasPrice()`

---

cast call 0x164c20A4E11cBE0d8B5e23F5EE35675890BE280d "s_lastGasPrices(uint64)(uint256)" 6433500567565415381 --rpc-url https://mainnet.base.org

28832 [2.883e4]

cast call 0x164c20A4E11cBE0d8B5e23F5EE35675890BE280d "getFunctionsFeeInLink(uint64)(uint256)" 6433500567565415381 --rpc-url https://mainnet.base.org
