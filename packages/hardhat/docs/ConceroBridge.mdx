# Solidity API

## ConceroBridge_InsufficientFees

```solidity
error ConceroBridge_InsufficientFees(uint256 amount, uint256 fee)
```

error emitted when the input amount is less than the fees

## ConceroBridge_OnlyProxyContext

```solidity
error ConceroBridge_OnlyProxyContext(address caller)
```

error emitted when a non orchestrator address call startBridge

## ConceroBridge

### CONCERO_FEE_FACTOR

```solidity
uint16 CONCERO_FEE_FACTOR
```

CONSTANTS///

### CCIPSent

```solidity
event CCIPSent(bytes32 ccipMessageId, address sender, address recipient, enum IStorage.CCIPToken token, uint256 amount, uint64 dstChainSelector)
```

event emitted when a CCIP message is sent

### Concero_StuckAmountWithdraw

```solidity
event Concero_StuckAmountWithdraw(address owner, address token, uint256 amount)
```

event emitted when a stuck amount is withdraw

### constructor

```solidity
constructor(struct IStorage.FunctionsVariables _variables, uint64 _chainSelector, uint256 _chainIndex, address _link, address _ccipRouter, address _dexSwap, address _pool, address _proxy, address[3] _messengers) public
```

### startBridge

```solidity
function startBridge(struct IStorage.BridgeData bridgeData, struct IDexSwap.SwapData[] dstSwapData) external payable
```

Function responsible to trigger CCIP and start the bridging process

_dstSwapData can be empty if there is no swap on destination
this function should only be able to called thought infra Proxy_

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| bridgeData | struct IStorage.BridgeData | The bytes data payload with transaction infos |
| dstSwapData | struct IDexSwap.SwapData[] | The bytes data payload with destination swap Data |

### getFunctionsFeeInLink

```solidity
function getFunctionsFeeInLink(uint64 dstChainSelector) public view returns (uint256)
```

Function to get the total amount of fees charged by Chainlink functions in Link

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| dstChainSelector | uint64 | the destination blockchain chain selector |

### getFunctionsFeeInUsdc

```solidity
function getFunctionsFeeInUsdc(uint64 dstChainSelector) public view returns (uint256)
```

Function to get the total amount of fees charged by Chainlink functions in USDC

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| dstChainSelector | uint64 | the destination blockchain chain selector |

### getCCIPFeeInLink

```solidity
function getCCIPFeeInLink(enum IStorage.CCIPToken tokenType, uint64 dstChainSelector, uint256 _amount) public view returns (uint256)
```

Function to get the total amount of CCIP fees in Link

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| tokenType | enum IStorage.CCIPToken | the position of the CCIPToken enum |
| dstChainSelector | uint64 | the destination blockchain chain selector |
| _amount | uint256 |  |

### getCCIPFeeInUsdc

```solidity
function getCCIPFeeInUsdc(enum IStorage.CCIPToken tokenType, uint64 dstChainSelector, uint256 _amount) public view returns (uint256)
```

Function to get the total amount of CCIP fees in USDC

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| tokenType | enum IStorage.CCIPToken | the position of the CCIPToken enum |
| dstChainSelector | uint64 | the destination blockchain chain selector |
| _amount | uint256 |  |

### _getSrcTotalFeeInUsdc

```solidity
function _getSrcTotalFeeInUsdc(enum IStorage.CCIPToken tokenType, uint64 dstChainSelector, uint256 amount) internal view returns (uint256)
```

Function to get the total src fee for a specific bridge transaction

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| tokenType | enum IStorage.CCIPToken | The bridgeable token |
| dstChainSelector | uint64 | the destination chain selector |
| amount | uint256 | the amount to be send |

### getSrcTotalFeeInUSDC

```solidity
function getSrcTotalFeeInUSDC(enum IStorage.CCIPToken tokenType, uint64 dstChainSelector, uint256 amount) external view returns (uint256)
```

Function to get the total amount of fees on the source

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| tokenType | enum IStorage.CCIPToken | the position of the CCIPToken enum |
| dstChainSelector | uint64 | the destination blockchain chain selector |
| amount | uint256 | the amount of value the fees will calculated over. |

